<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Application - Geneseq Documentation</title>
  

  <link rel="shortcut icon" href="../img/favicon.ico">

  
  <link href='https://fonts.googleapis.com/css?family=Lato:400,700|Roboto+Slab:400,700|Inconsolata:400,700' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="../css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../css/theme_extra.css" type="text/css" />
  <link rel="stylesheet" href="../css/highlight.css">

  
  <script>
    // Current page data
    var mkdocs_page_name = "Application";
  </script>
  
  <script src="../js/jquery-2.1.1.min.js"></script>
  <script src="../js/modernizr-2.8.3.min.js"></script>
  <script type="text/javascript" src="../js/highlight.pack.js"></script>
  <script src="../js/theme.js"></script> 

  
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
      <div class="wy-side-nav-search">
        <a href=".." class="icon icon-home"> Geneseq Documentation</a>
        <div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        <ul class="current">
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="..">Home</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 ">
        <a class="" href="../docker/">Using Docker</a>
        
    </li>
<li>
          
            <li>
    <li class="toctree-l1 current">
        <a class="current" href="./">Application</a>
        
            <ul>
            
                <li class="toctree-l3"><a href="#users">Users</a></li>
                
                    <li><a class="toctree-l4" href="#registering">Registering</a></li>
                
            
                <li class="toctree-l3"><a href="#database-update">Database Update</a></li>
                
                    <li><a class="toctree-l4" href="#updating-mouse-expression">Updating Mouse Expression</a></li>
                
                    <li><a class="toctree-l4" href="#updating-mouse-annotations">Updating Mouse Annotations</a></li>
                
                    <li><a class="toctree-l4" href="#updating-processed-mouse-celltype-expression">Updating Processed Mouse Celltype Expression</a></li>
                
            
            </ul>
        
    </li>
<li>
          
            <li>
    <ul class="subnav">
    <li><span>Api</span></li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../api/source/app/html/js/dev/expression_bodymap/">Bodymap</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../api/source/app/html/js/dev/expression_mouse/">Mouse</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../api/source/app/html/js/dev/expression_brainspan/">Brainspan</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../api/source/app/html/js/dev/fit_worker/">Spline Worker</a>
        
    </li>

        
            
    <li class="toctree-l1 ">
        <a class="" href="../api/source/app/html/js/dev/data_table/">Data Table</a>
        
    </li>

        
    </ul>
<li>
          
        </ul>
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="..">Geneseq Documentation</a>
      </nav>

      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="..">Docs</a> &raquo;</li>
    
      
    
    <li>Application</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="https://github.com/miclaraia/geneseq" class="icon icon-github"> Edit on GitHub</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main">
            <div class="section">
              
                <h1 id="users">Users</h1>
<h2 id="registering">Registering</h2>
<p>When a user registers from the provided login page, their credentials
are added to the database, but they don't get privileges to the private data.
That has to be added manually through the mongo shell or
the mongo-express interface.</p>
<p>To give a user privileges, either</p>
<ul>
<li>run the commands inside the mongo shell  </li>
</ul>
<pre><code>&gt; use gene_locale  
&gt; db.users.update({username: {USERNAME}}, {$set: {super: true}})
</code></pre>

<ul>
<li>
<p>Manually edit the user's entry from mongo-express
    <img alt="Screenshot" src="../img/user-1-1.png" />    </p>
<p><img alt="Screenshot" src="../img/user-2-2.png" /></p>
</li>
</ul>
<h1 id="database-update">Database Update</h1>
<p>It is <strong>strongly</strong> recommended to have thorough backups of the existing
database before messing with anything. These scripts are potentially
destructive and leave no way to recover the previous contents.</p>
<h2 id="updating-mouse-expression">Updating Mouse Expression</h2>
<p>Update the processed celltype data by running the update_processed script
and passing the location of the data-file containing the information. The file
must be set up as indicated below, and be a proper tab-seperated file
using <code>\t</code> as the delimiter and <code>\n</code> as newline.</p>
<p>Note: the column order doesn't matter, just the column headings. Any extraneous
columns will be ignored. The trailing number denotes the sample number when 
sets come from the same celltype and brain region.</p>
<table>
<thead>
<tr>
<th></th>
<th>celltype1:region1:1</th>
<th>celltype1:region1:2</th>
<th>celltype2:region:1</th>
</tr>
</thead>
<tbody>
<tr>
<td>ENSMUSG00000000001.4</td>
<td>1.5773738</td>
<td>55.4939338</td>
<td>3383.5585858</td>
</tr>
</tbody>
</table>
<p>Comman to upload the data:</p>
<pre><code>/usr/local/bin/update_mouse_expression PATH/TO/FILE
</code></pre>

<p>This command will drop the existing table and upload the data from file. Make sure to have a backup on hand.</p>
<h2 id="updating-mouse-annotations">Updating Mouse Annotations</h2>
<p>Update the mouse annotations collection by running the update_annotations script
and passing the location of the csv file containing the information. The file
must be set up as indicated below, and be a proper csv file
using <code>,</code> as the delimiter and <code>\n</code> as the newline.</p>
<p>Note: the column order doesn't matter, just the column headings. Any extraneous
columns will be ignored.</p>
<table>
<thead>
<tr>
<th>protected</th>
<th>method</th>
<th>level1</th>
<th>level2</th>
<th>level3_celltype</th>
<th>level4</th>
<th>sampleID</th>
</tr>
</thead>
<tbody>
<tr>
<td>public OR private</td>
<td></td>
<td>level1 name</td>
<td>level2 group name</td>
<td>level3 celltype</td>
<td>level4 celltype</td>
<td>level1:brain_region</td>
</tr>
<tr>
<td>private</td>
<td>TRAP</td>
<td>Stard8_neuron</td>
<td>midbrain</td>
<td>neuron</td>
<td>neuron</td>
<td>neuron</td>
</tr>
</tbody>
</table>
<p>Comman to upload the data</p>
<pre><code>/usr/local/bin/update_annotations PATH/TO/FILE.csv
</code></pre>

<p>This command will drop the existing table and upload the data from file. Make sure to have a backup on hand.</p>
<h2 id="updating-processed-mouse-celltype-expression">Updating Processed Mouse Celltype Expression</h2>
<p>Update the processed celltype data by running the update_processed script
and passing the location of the data-file containing the information. The file
must be set up as indicated below, and be a proper tab-seperated file
using <code>\t</code> as the delimiter and <code>\n</code> as newline.</p>
<p>Note: the column order doesn't matter, just the column headings. Any extraneous
columns will be ignored.</p>
<table>
<thead>
<tr>
<th>Celltype</th>
<th>Expression</th>
<th>Enrichment</th>
<th>GeneID_human</th>
<th>GeneName</th>
<th>GeneID_mouse</th>
</tr>
</thead>
<tbody>
<tr>
<td>Astrocyte</td>
<td>36.25311</td>
<td>6.53970054</td>
<td>ENSG000001343</td>
<td>GRHL1</td>
<td>ENSMUSG00000020656</td>
</tr>
</tbody>
</table>
<p>Comman to upload the data:</p>
<pre><code>/usr/local/bin/update_processed PATH/TO/FILE
</code></pre>

<p>This command will not drop the existing table, but still make sure to have a backup on hand.</p>
              
            </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../api/source/app/html/js/dev/expression_bodymap/" class="btn btn-neutral float-right" title="Bodymap"/>Next <span class="icon icon-circle-arrow-right"></span></a>
      
      
        <a href="../docker/" class="btn btn-neutral" title="Using Docker"><span class="icon icon-circle-arrow-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
    
  </div>

  Built with <a href="http://www.mkdocs.org">MkDocs</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
	  
        </div>
      </div>

    </section>

  </div>

<div class="rst-versions" role="note" style="cursor: pointer">
    <span class="rst-current-version" data-toggle="rst-current-version">
      
          <a class="icon icon-github" style="float: left; color: #fcfcfc"> GitHub</a>
      
      
        <span><a href="../docker/" style="color: #fcfcfc;">&laquo; Previous</a></span>
      
      
        <span style="margin-left: 15px"><a href="../api/source/app/html/js/dev/expression_bodymap/" style="color: #fcfcfc">Next &raquo;</a></span>
      
    </span>
</div>

</body>
</html>
